// Generated by CoffeeScript 1.9.2
(function(_oG) {
/*! Ldc 0.0.6 //// MIT Licence //// http://ldc.richplastow.com/ */
var Item, Ldc, _o, _oT, _oV,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

_oT = 'Ldc';

_oV = '0.0.6';

_o = {};

Item = (function() {
  Item.prototype.C = 'Item';

  Item.prototype.toString = function() {
    return '[object Item]';
  };

  function Item(config) {
    var M, v;
    if (config == null) {
      config = {};
    }
    M = "/ldc/src/Item.litcoffee Item()\n  ";
    v = _o.validator(M + 'config.', config);
    this.uid = v('uid <string ^[a-z]\\w{1,23}$>');
    this.prev = v('prev <Item|null>');
    this.next = v('next <Item|null>');
  }

  Item.prototype.xx = function(yy) {
    var M;
    return M = "/ldc/src/Item.litcoffee Item::xx()\n  ";
  };

  return Item;

})();

Ldc = (function() {
  Ldc.prototype.C = 'Ldc';

  Ldc.prototype.toString = function() {
    return '[object Ldc]';
  };

  function Ldc(config) {
    var M;
    if (config == null) {
      config = {};
    }
    M = "/ldc/src/Ldc.litcoffee Ldc()\n  ";
    this.items = {};
    this.items._length = 0;
    this.items._first = null;
    this.items._last = null;
  }

  Ldc.prototype.addItem = function(kind, config, uid) {
    var M, kinds, v;
    M = "/ldc/src/Ldc.litcoffee Ldc::addItem()\n  ";
    kinds = {
      Hat: Item.Hit.Hat,
      Sine: Item.Tone.Sine
    };
    v = _o.validator(M + 'argument ', {
      kind: kind,
      config: config,
      uid: uid
    });
    kind = v('kind <string ^' + Object.keys(kinds).join('$|^') + '$>');
    config = v('config <object>', {});
    uid = v('uid <string ^[a-z]\\w{1,23}$>', _o.uid(kind.toLowerCase()));
    if (!_o.isU(this.items[uid])) {
      throw RangeError(M + ("an Item with uid '" + uid + "' already exists"));
    }
    config.uid = uid;
    config.prev = this.items._length ? this.items._last : null;
    config.next = null;
    this.items[uid] = new kinds[kind](config);
    if (this.items._length) {
      this.items._last.next = this.items[uid];
    } else {
      this.items._first = this.items[uid];
    }
    this.items._last = this.items[uid];
    this.items._length++;
    return uid;
  };

  Ldc.prototype.deleteItem = function(uid) {
    var M, item, v;
    M = "/ldc/src/Ldc.litcoffee Ldc::deleteItem()\n  ";
    v = _o.validator(M + 'argument ', {
      uid: uid
    });
    v('uid <string ^[a-z]\\w{1,23}$>');
    if (_o.isU(this.items[uid])) {
      throw RangeError(M + ("the Item with uid '" + uid + "' does not exist"));
    }
    item = this.items[uid];
    if (item.prev) {
      item.prev.next = item.next;
    }
    if (item.next) {
      item.next.prev = item.prev;
    }
    this.items._length--;
    if (!item.prev) {
      this.items._first = item.next;
    }
    if (!item.next) {
      this.items._last = item.prev;
    }
    delete this.items[uid];
    return void 0;
  };

  Ldc.prototype.xx = function(yy) {
    var M;
    return M = "/ldc/src/Ldc.litcoffee Ldc::xx()\n  ";
  };

  return Ldc;

})();

Ldc.xx = function(yy) {
  var M;
  return M = "/ldc/src/Ldc.litcoffee Ldc.xx()\n  ";
};

if ('undefined' === typeof console || !console.log) {
  _o = function() {};
} else if ('object' === typeof console.log) {
  _o = Function.prototype.bind(console.log, console);
} else {
  _o = console.log.bind(console);
}

_o.A = 'array';

_o.B = 'boolean';

_o.D = 'document';

_o.E = 'error';

_o.F = 'function';

_o.I = 'integer';

_o.N = 'number';

_o.O = 'object';

_o.R = 'regexp';

_o.S = 'string';

_o.U = 'undefined';

_o.X = 'null';

_o.G = _oG;

_o.T = _oT;

_o.V = _oV;

_o.is = function(c, t, f) {
  if (t == null) {
    t = true;
  }
  if (f == null) {
    f = false;
  }
  if (c) {
    return t;
  } else {
    return f;
  }
};

_o.isU = function(x) {
  return _o.U === typeof x;
};

_o.isX = function(x) {
  return null === x;
};

_o.type = function(a) {
  var ta;
  if (_o.isX(a)) {
    return _o.X;
  }
  ta = typeof a;
  if ({
    undefined: 1,
    string: 1,
    number: 1,
    boolean: 1
  }[ta]) {
    return ta;
  }
  if (!a.nodeName && a.constructor !== Array && /function/i.test('' + a)) {
    return _o.F;
  }
  return {}.toString.call(a).match(/\s([a-z0-9]+)/i)[1].toLowerCase();
};

_o.ex = function(x, a, b) {
  var pos;
  if (-1 === (pos = a.indexOf(x))) {
    return x;
  } else {
    return b.charAt(pos);
  }
};

_o.has = function(h, n, t, f) {
  if (t == null) {
    t = true;
  }
  if (f == null) {
    f = false;
  }
  if (-1 !== h.indexOf(n)) {
    return t;
  } else {
    return f;
  }
};

_o.uid = function(p) {
  return (p || '') + '_' + (Math.random() + '1111111111111111').slice(2, 18);
};

_o.insert = function(basis, overlay, offset) {
  return basis.slice(0, offset) + overlay + basis.slice(offset + overlay.length);
};

_o.redefine = function(obj, name, value, kind) {
  switch (kind) {
    case 'constant':
      return Object.defineProperty(obj, name, {
        value: value,
        enumerable: true
      });
    case 'private':
      return Object.defineProperty(obj, name, {
        value: value,
        enumerable: false
      });
  }
};

_o.validator = function(M, obj) {
  return function(signature, fallback) {
    var i, key, len, matches, max, min, ref, ref1, rule, tv, type, types, value;
    matches = signature.match(/^([_a-z][_a-z0-9]*)\s+<([|a-z]+)\s*(.*)>$/i);
    if (!matches) {
      throw RangeError("/jsmultrun/src/_o-helpers.litcoffee _o.valid()\n  signature " + signature + " is invalid");
    }
    signature = matches[0], key = matches[1], types = matches[2], rule = matches[3];
    value = obj[key];
    tv = _o.type(value);
    if (_o.U === tv) {
      if (2 === arguments.length) {
        return fallback;
      }
      throw TypeError(M + key + " is undefined and has no fallback");
    }
    ref = types.split('|');
    for (i = 0, len = ref.length; i < len; i++) {
      type = ref[i];
      if ((_o.N === type || _o.I === type) && _o.N === tv) {
        if (_o.I === type && value % 1) {
          throw RangeError(M + key + " is a number but not an integer");
        }
        if (rule) {
          ref1 = rule.split('-'), min = ref1[0], max = ref1[1];
          if (value < min || value > max) {
            throw RangeError(M + key + (" is " + value + " (must be " + rule + ")"));
          }
        }
        return value;
      }
      if (type === tv) {
        if (_o.S === tv && rule) {
          if (!RegExp(rule).test(value)) {
            throw RangeError(M + key + (" fails " + rule));
          }
        }
        return value;
      }
      if (/^[A-Z]/.test(type)) {
        if (_o.O !== tv) {
          continue;
        }
        _o('there!', type, value.C, eval("value instanceof " + type));
        if (eval("value instanceof " + type)) {
          return value;
        }
      }
    }
    throw TypeError(M + key + (" is type " + tv + " not " + types));
  };
};

if (_o.F === typeof define && define.amd) {
  define(function() {
    return Ldc;
  });
} else if (_o.O === typeof module && module && module.exports) {
  module.exports = Ldc;
} else {
  _o.G.Ldc = Ldc;
}

Item.Hit = (function(superClass) {
  extend(Hit, superClass);

  Hit.prototype.C = 'Item.Hit';

  Hit.prototype.toString = function() {
    return '[object Item.Hit]';
  };

  function Hit(config) {
    var M;
    if (config == null) {
      config = {};
    }
    M = "/ldc/src/Item/Hit.litcoffee Item.Hit()\n  ";
    Hit.__super__.constructor.call(this, config);
    this.x = null;
  }

  Hit.prototype.xx = function(yy) {
    var M;
    return M = "/ldc/src/Item/Hit.litcoffee Item.Hit::xx()\n  ";
  };

  return Hit;

})(Item);

Item.Tone = (function(superClass) {
  extend(Tone, superClass);

  Tone.prototype.C = 'Item.Tone';

  Tone.prototype.toString = function() {
    return '[object Item.Tone]';
  };

  function Tone(config) {
    var M;
    if (config == null) {
      config = {};
    }
    M = "/ldc/src/Item/Tone.litcoffee Item.Tone()\n  ";
    Tone.__super__.constructor.call(this, config);
    this.x = null;
  }

  Tone.prototype.xx = function(yy) {
    var M;
    return M = "/ldc/src/Item/Tone.litcoffee Item.Tone::xx()\n  ";
  };

  return Tone;

})(Item);

Item.Hit.Hat = (function(superClass) {
  extend(Hat, superClass);

  Hat.prototype.C = 'Item.Hit.Hat';

  Hat.prototype.toString = function() {
    return '[object Item.Hit.Hat]';
  };

  function Hat(config) {
    var M;
    if (config == null) {
      config = {};
    }
    M = "/ldc/src/Item/Hit/Hat.litcoffee Item.Hit.Hat()\n  ";
    Hat.__super__.constructor.call(this, config);
    this.x = null;
  }

  Hat.prototype.xx = function(yy) {
    var M;
    return M = "/ldc/src/Item/Hit/Hat.litcoffee Item.Hit.Hat::xx()\n  ";
  };

  return Hat;

})(Item.Hit);

Item.Tone.Sine = (function(superClass) {
  extend(Sine, superClass);

  Sine.prototype.C = 'Item.Tone.Sine';

  Sine.prototype.toString = function() {
    return '[object Item.Tone.Sine]';
  };

  function Sine(config) {
    var M;
    if (config == null) {
      config = {};
    }
    M = "/ldc/src/Item/Tone/Sine.litcoffee Item.Tone.Sine()\n  ";
    Sine.__super__.constructor.call(this, config);
    this.x = null;
  }

  Sine.prototype.xx = function(yy) {
    var M;
    return M = "/ldc/src/Item/Tone/Sine.litcoffee Item.Tone.Sine::xx()\n  ";
  };

  return Sine;

})(Item.Tone);
}).call(this,this);
// Example vendor file. 
